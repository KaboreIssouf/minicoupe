/*Macle 25.9.0 jssdk v9.1.55  Mon Sep 29 2025*/
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).jssdk=t()}(this,(function(){"use strict";var e,t;const r=null===(t=null===(e=null===window||void 0===window?void 0:window.navigator)||void 0===e?void 0:e.userAgent)||void 0===t?void 0:t.toLocaleLowerCase(),n=-1!==(null==r?void 0:r.indexOf("android")),o=Symbol("currentRoute"),a=Symbol("isInitd"),i=Symbol("tabBar"),s=Symbol("canNavigateTo"),c="__ma__global__",l={[o]:"",[a]:!1,[i]:null,[s]:!0};function u(e,t){l[e]=t}function E(e){return window[c][e]}window[c]=l;const d={MiniProgram:{NAVIGATE_TO:"navigateTo",NAVIGATE_BACK:"navigateBack",REDIRECT_TO:"redirectTo",SWITCH_TAB:"switchTab",RE_LAUNCH:"reLaunch",POST_MESSAGE:"postMessage",CLOSE:"close"},Native:{CHOOSE_VIDEO:"chooseVideo",CHOOSE_IMAGE:"chooseImage",GET_LOCAL_IMG_DATA:"getLocalImgData",GET_LOCATION:"getLocation",PREVIEW_IMAGE:"previewImage",OPEN_DOCUMENT:"openDocument",GET_STORAGE:"getStorage",SET_STORAGE:"setStorage",GET_STORAGE_SYNC:"getStorageSync",SET_STORAGE_SYNC:"setStorageSync",REMOVE_STORAGE:"removeStorage",CLEAR_STORAGE:"clearStorage",GET_NETWORK_TYPE:"getNetworkType",SCAN_CODE:"scanCode",GET_STATUS_BAR_HEIGHT:"getStatusBarHeight",CAPSULE_STYLE:"capsuleStyle",HIDE_LOADING:"hideLoading",SHOW_LOADING:"showLoading",SHOW_TOAST:"showToast",GET_SMALL_APP_INFO:"getsmallappinfo",GO_TO_BROWSER:"gotoBrowser",SAVE_FILE_TO_PHONE:"saveFileToPhone",SAVE_IMAGE:"saveImage",SAVE_BASE64_IMAGE:"saveBase64Image",CHOOSE_CONTACT:"chooseContact",IS_ONLINE:"isOnline",REQUEST:"request",UPLOAD_FILE:"uploadFile",DOWNLOAD_FILE:"downloadFile",REPORT_EVENT:"reportEvent",REPORT_PERFORMANCE:"reportPerformance",REPORT_LOG:"reportLog",SUBMIT_REPORT:"submitReport",PLAY_VOICE:"playVoice",PLAY_AUDIO:"playAudio",GET_BACKGROUND_FETCH_DATA:"getBackgroundFetchData",GET_LAUNCH_OPTIONS_SYNC:"getLaunchOptionsSync",GET_SYSTEM_INFO_SYNC:"getSystemInfoSync",NAVIGATE_TO_MINI_PROGRAM:"navigateToMiniProgram",EXIT_MINI_PROGRAM:"exitMiniProgram",STOP_AUOID:"stopVoice",GET_OPEN_USER_INFO:"getOpenUserInfo",GET_AUTH_CODE:"getAuthCode",OPEN_BLUETOOTH_ADAPTER:"openBluetoothAdapter",CLOSE_BLUETOOTH_ADAPTER:"closeBluetoothAdapter",START_BLUETOOTH_DEVICES_DISCOVERY:"startBluetoothDevicesDiscovery",STOP_BLUETOOTH_DEVICES_DISCOVERY:"stopBluetoothDevicesDiscovery",CREATE_BLE_CONNECTION:"createBLEConnection",CLOSE_BLE_CONNECTION:"closeBLEConnection",GET_BLE_DEVICE_SERVICES:"getBLEDeviceServices",GET_BLE_DEVICE_CHARACTERISTICS:"getBLEDeviceCharacteristics",READ_BLE_CHARACTERISTIC_VALUE:"readBLECharacteristicValue",WRITE_BLE_CHARACTERISTIC_VALUE:"writeBLECharacteristicValue",ON_BLUETOOTH_DEVICE_FOUND:"ON_BT_DEVICE_FOUND",ON_SCREEN_RECORD_STATE_CHANGE:"ON_SCREEN_RECORD_STATE_CHANGE",ON_KEYBOARD_HEIGHT_CHANGE:"ON_KEYBOARD_HEIGHT_CHANGE",TRADE_PAY:"tradePay",DEAUTHORIZE_PERMISSION:"deauthorize",CANCLE_AUTHORIZE_PERMISSION:"cancelAuthorize",GET_SYSTEM_SETTING:"getSystemSetting",BASE64_TO_ARRAYBUFFER:"base64ToArrayBuffer",GET_CLIPBOARD_DATA:"getClipboardData",SET_CLIPBOARD_DATA:"setClipboardData",SET_CAPSULE_SHOW:"setCapsuleShow"}},f=void 0!==window.parent.__simulatorConfig__;const _=new class{constructor(){this.eventMap=new Map,this.callbackMap=new Map}on(e,t){var r;const n=function(...e){try{t.apply(void 0,e)}catch(e){console.error(e)}};this.callbackMap.set(t,n),this.eventMap.has(e)?null===(r=this.eventMap.get(e))||void 0===r||r.add(n):this.eventMap.set(e,new Set([n]))}off(e,t){const r=this.eventMap.get(e);if(r)if(t){const e=this.callbackMap.get(t);r.delete(e)}else r.clear()}get(e){return this.eventMap.get(e)}emit(e,t){const r=this.eventMap.get(e);if(r)for(const e of r)e.call(this,t)}},v={};let O=0;const N={};function T(e,t={},r){const o=JSON.stringify(t),a=++O;v[a]=r,function(e,t,r){f?window.simulatorWebkit.messageHandlers.invoke.postMessage({command:e,inputParams:t,callbackId:r,type:"legacy"}):n?window.viewLayerNative.invoke(e,t,r):window.webkit.messageHandlers.invoke.postMessage({command:e,inputParams:t,callbackId:r})}(e,o,a)}function I(e,t){const r=JSON.stringify(Object.assign({command:e},t));return window.prompt(r)}function A(e,t,r={}){const n={};for(const e in t)"function"==typeof t[e]&&(n[e]=t[e],delete t[e]);T(e,t,((e,t)=>{var o,a,i,s,c,l,u,E,d,f,_;const v=0===Number(e),O=[1,-1].includes(Number(e));v?(null===(o=null==r?void 0:r.beforeAll)||void 0===o||o.call(r,t),null===(a=null==r?void 0:r.beforeSuccess)||void 0===a||a.call(r,t),null===(i=n.success)||void 0===i||i.call(n,t),null===(s=null==r?void 0:r.afterSuccess)||void 0===s||s.call(r,t)):O?(null===(c=null==r?void 0:r.beforeFail)||void 0===c||c.call(r,t),null===(l=n.fail)||void 0===l||l.call(n,t),null===(u=null==r?void 0:r.afterFail)||void 0===u||u.call(r,t)):(null===(E=null==r?void 0:r.beforeSuccess)||void 0===E||E.call(r,t),null===(d=null==n?void 0:n.preload)||void 0===d||d.call(n,t)),(v||O)&&(null===(f=n.complete)||void 0===f||f.call(n,t),null===(_=null==r?void 0:r.afterAll)||void 0===_||_.call(r,t))}))}function m(e,t={}){const r=JSON.stringify(t);f?window.simulatorWebkit.messageHandlers.notifyNative.postMessage({command:e,inputParams:r,type:"legacy"}):n?window.viewLayerNative.notifyNative(e,r):window.webkit.messageHandlers.notifyNative.postMessage({command:e,inputParams:r})}function p(e,t){N[e]=t}const S={invoke:T,invokeMethod:A,notifyNative:m,invokeSync:I,onNativeNotify:function(e,t,r){!function(e,t,r){"function"==typeof e&&e(r,t||r.webviewId||"")}(N[e],t,r)},onBasicEvent:p,offBasicEvent:function(e){N[e]=void 0}};window.logicLayer=S;const g={},C="ma_custom_event_";function b(e,t){g[`${C}${e}`]=t}function R(e,t={}){const r=JSON.stringify(t);h(`${C}${e}`,r)}function h(e,t){f?window.simulatorWebkit.messageHandlers.notifyNative.postMessage({eventName:e,paramsString:t,type:"legacy"}):n?window.viewLayerNative.notifyNative(e,t):window.webkit.messageHandlers.notifyNative.postMessage({eventName:e,paramsString:t})}const L={invoke:T,invokeSync:I,invokeMethod:A,beforeInvoke:function(e,t={},r={}){return t.success||t.fail||t.complete?A(e,t,r):new Promise(((n,o)=>{t.success=n,t.fail=o,A(e,t,r)}))},notifyNative:m,subscribe:b,webSubscribe:function(e,t){g[e]=t},publish:R,webPublish:function(e,t={}){h(e,JSON.stringify(t))},onBasicEvent:p};function P(){if(!E(a)){u(a,!0);try{L.onBasicEvent(d.Native.ON_BLUETOOTH_DEVICE_FOUND,(e=>{_.emit(d.Native.ON_BLUETOOTH_DEVICE_FOUND,e)})),L.onBasicEvent(d.Native.ON_SCREEN_RECORD_STATE_CHANGE,(e=>{_.emit(d.Native.ON_SCREEN_RECORD_STATE_CHANGE,e)})),L.onBasicEvent(d.Native.ON_KEYBOARD_HEIGHT_CHANGE,(e=>{_.emit(d.Native.ON_KEYBOARD_HEIGHT_CHANGE,e)})),b("getCurrentRoute",(e=>{u(o,e.route),u(i,e.tabBar),u(s,void 0===e.canNavigateTo||e.canNavigateTo)})),R("getCurrentRoute")}catch(e){}}}class y extends Error{constructor(e,t){if(super(`${e} fail, ${t}`),this.fileName="",this.lineNumber=1,this.columnNumber=-1,this.name=this.constructor.name,!this.stack)return;const[,r,n=1,o]=this.stack.match(/\/([\/\w-_\.]+\.js):(\d*):(\d*)/)||[];this.fileName=r,this.lineNumber=Number(n),this.columnNumber=Number(o)}}class D extends y{constructor(e,t,r){super(e,t),this.errno=r,this.name=this.constructor.name}}const M="MACLE_ERROR_LOG",k={normalError(e){const t=e.message instanceof Event?e.message.toString():String(e.message),r={key:e.key||"MacleApiError",stack:e.stack||t,apiName:e.apiName,keywords:e.keywords,fwkVersion:"",file:e.file,line:e.line,column:e.column,timestamp:Date.now()};try{m(M,r)}catch(e){console.log("Native error reporting failed:",e)}console.error(null==e?void 0:e.message)}};class U{static Errno(e,t,r){return parseInt(`${e}${t}${r}`)}}const G={COMMON:"00",BASIC_CAPABILITY:"01",ROUTE_CAPABILITY:"02",UI_CAPABILITY:"03"},B={COMMON:"00",UI_INTERACTION:"01",UI_NAVIGATION_BAR:"02",UI_BACKGROUND:"03",UI_TAB_BAR:"04",UI_FONT:"05",UI_PULL_DOWN_REFRESH:"06",UI_ROLLING:"07",UI_CUSTOM_COMPONENTS:"08",UI_MENU:"09"},H={INVALID_TYPE:"001",INVALID_VALUE:"002",MISSING_PARAM:"003"};function w(e,t,r=!0){let n,o,a=t;if(r&&(a=function(e){const t=e.split("?");return t[0]+=".html",void 0===t[1]?t[0]:`${t[0]}?${t[1]}`}(a)),a.startsWith("/"))return a.substr(1);if(a.startsWith("./"))return w(e,a.substr(2),!1);const i=a.split("/");for(n=0,o=i.length;n<o&&".."===i[n];n++);i.splice(0,n);const s=e.length>0?e.split("/"):[];return s.splice(s.length-n-1,n+1),s.concat(i).join("/")}function V(e){const t=e.split("?"),[r,n]=t;if(!n)return e;const o=n.split("&").reduce(((e,t)=>{if("string"==typeof t&&t.length>0){const r=t.split("="),n=r[0],o=r[1];e[n]=o}return e}),Object.create(null)),a=[];for(const e in o)a.push(e+"="+encodeURIComponent(o[e]));return a.length>0?r+"?"+a.join("&"):e}function j(e,t){const r=E(i);if(null===r)return!0;t.url.startsWith("/")&&(t.url=t.url.slice(1));const n=(o=t.url,null==r?void 0:r.list.find((e=>0===o.indexOf(e.pagePath))));var o;return e!==d.MiniProgram.NAVIGATE_TO&&e!==d.MiniProgram.REDIRECT_TO||!n?!(e===d.MiniProgram.SWITCH_TAB&&!n)||(Y(e,`${e}: can not ${e} to a non-tabbar page`),!1):(Y(e,`${e}: can not ${e} to a tabbar page`),!1)}function F(e){return/^(http|https):\/\/.*/i.test(e)}function $(e){return Object.prototype.toString.call(e).split(" ")[1].split("]")[0]}function Y(e,t){const r=new y(e,t);return k.normalError({message:r.message,file:r.fileName,line:r.lineNumber,column:r.columnNumber}),r}function W(e,t){if(K(e)&&J(t)&&Object.keys(t).length){const[r,n]=function(e){return e.split("?")}(e),o=function(e){return e.split("&").reduce(((e,t)=>{const[r,n]=t.split("=");return e[r]=n,e}),{})}(n),a=function(e){return Object.fromEntries(Object.entries(e).map((([e,t])=>J(t)?[e,JSON.stringify(t)]:[e,t])))}(t);return`${r}?${function(e){if(!J(e))return e;const t=[];for(const r in e)try{t.push(`${encodeURIComponent(r)}=${encodeURIComponent(e[r])}`)}catch(n){t.push(`${r}=${e[r]}`)}return t.join("&")}(function(e,t){for(const[r,n]of Object.entries(t))e[r]=n;return e}(o,a))}`}return e}function x(e){return"Array"===$(e)}function K(e){return"String"===$(e)}function J(e){return"Object"===$(e)}function z(e){return"Number"===$(e)}function Z(e,t,r,n){var o;const a=new D(e,r,n),i=(null==r?void 0:r.startsWith(e))?r:a.message;if(Y(e,r),!t.success&&!t.fail&&!t.complete)return new Promise(((e,r)=>{t.fail=r,t.fail(Object.assign({errMsg:i},void 0!==n?{errno:a.errno}:{}))}));for(const e of["fail","complete"]){null===(o=t[e])||void 0===o||o.call(t,Object.assign({errMsg:i},void 0!==n?{errno:a.errno}:{}))}return null}function q(e,t,r,n="parameter",o=!1){let a="";const i=$(t),s=$(r);if(i!==s)return a=`${n} should be ${s} instead of ${i};`,t.invalidParamObj=Z(e,t,a),!1;if("Object"!==s)return!0;for(const[e,n]of Object.entries(r))if(Object.prototype.hasOwnProperty.call(t,e)||o){const r=$(n),o=$(t[e]);r!==o&&(a+=`${e} should be ${r} instead of ${o};`)}return!a||(t.invalidParamObj=Z(e,t,a),!1)}function X(e,t,r,n="parameter",o=!1){let a,i="";const s=$(t),c=$(r);if(s!==c)return i=`parameter error: parameter.${n} type not legal, please check it.`,t.invalidParamObj=Z(e,t,i,a),!1;if("Object"!==c)return!0;for(const[e,n]of Object.entries(r))if(Object.prototype.hasOwnProperty.call(t,e)||o){if($(n)!==$(t[e])){i=`parameter error: parameter.${e} type not legal, please check it.`,a=U.Errno(G.COMMON,B.COMMON,H.INVALID_TYPE);break}}return!i||(t.invalidParamObj=Z(e,t,i,a),!1)}function Q(e,t,r,n={},o="parameter"){const a=function(e,t,r={}){var n;const o=Object.assign({},t);for(let a in t)void 0===e[a]&&(null===(n=r[a])||void 0===n?void 0:n.optional)&&(delete o[a],delete r[a]);return o}(t,r,n);return!!q(e,t,a,o,!0)&&function(e,t,r,n={},o="parameter"){let a="";for(let e in n){const o=t[e],i=r[e],{range:s,checkSubEleType:c,nonempty:l}=n[e];l&&(a+=ee(e,o)),c&&(a+=te(e,o,i)),(null==s?void 0:s.length)&&(a+=re(e,o,s))}if(a)return t.invalidParamObj=Z(e,t,a),!1;return!0}(e,t,a,n,o)}function ee(e,t){const r=x(t)&&!t.length,n=K(t)&&!t.trim();return r||n?`parameter error: ${e} cannot be empty;`:""}function te(e,t,r){let n="";if(x(t)){const o=r.map((e=>$(e))),a=t.filter((e=>!o.includes($(e))));a.length&&(n+=`parameter error: invalid ${e} ${a}, the sub-element type of ${e} should be ${o.join(" or ")};`)}if(J(t))for(const o in r){const a=$(t[o]),i=$(r[o]);a!==i&&(n+=`parameter error: ${e}.${o} should be ${i} instead of ${a};`)}return n}function re(e,t,r){const n=(x(t)?t:[t]).filter((e=>!r.includes(e)));return n.length?`parameter error: invalid ${e} ${n};`:""}const ne=["AUTH_BASE","AUTH_USER","SEND_MESSAGE","USER_NICKNAME","USER_NAME","USER_LOGIN_ID","PLAINTEXT_USER_LOGIN_ID","HASH_LOGIN_ID","USER_AVATAR","USER_GENDER","USER_BIRTHDAY","USER_NATIONALITY","USER_CONTACTINFO","USER_ADDRESS","PLAINTEXT_MOBILE_PHONE"],oe=["location","camera","photosAlbums","contacts","record","jumpMiniApp","gotoBrowser","bluetooth","payment","video","storage"];function ae(e,t,r){for(const[n,o]of Object.entries(e))if(!o||"string"==typeof o&&0===o.trim().length)return t.invalidParamObj=Z(r,t,`parameter error: ${n} should be required instead of Undefined or empty.`),!1;return!0}function ie(e){return"Function"===$(e)}var se=Object.freeze({__proto__:null,close:function(){L.invokeMethod(d.MiniProgram.CLOSE)},getEnv:function(e){e({miniprogram:"miniprogram"===window.__ma_environment})},navigateBack:function(e){const t=Object.assign({delta:1},e);L.beforeInvoke(d.MiniProgram.NAVIGATE_BACK,t)},navigateTo:function(e){if(!e.url)return Z(d.MiniProgram.NAVIGATE_TO,e,"parameter error:parameter.url should be String instead of Undefined.");const t=e;t.url=w(E(o),t.url),t.url=V(t.url),j(d.MiniProgram.NAVIGATE_TO,t)&&L.beforeInvoke(d.MiniProgram.NAVIGATE_TO,t)},postMessage:function(e){L.beforeInvoke(d.MiniProgram.POST_MESSAGE,e)},reLaunch:function(e){if(!e.url)return Z(d.MiniProgram.RE_LAUNCH,e,"parameter error:parameter.url should be String instead of Undefined.");const t=e;t.url=w(E(o),t.url),t.url=V(t.url),j(d.MiniProgram.RE_LAUNCH,t)&&L.beforeInvoke(d.MiniProgram.RE_LAUNCH,t)},redirectTo:function(e){if(!e.url)return Z(d.MiniProgram.REDIRECT_TO,e,"parameter error:parameter.url should be String instead of Undefined.");const t=e;t.url=w(E(o),t.url),t.url=V(t.url),j(d.MiniProgram.REDIRECT_TO,t)&&L.beforeInvoke(d.MiniProgram.REDIRECT_TO,t)},switchTab:function(e){if(!e.url)return Z(d.MiniProgram.SWITCH_TAB,e,"parameter error:parameter.url should be String instead of Undefined.");const t=e;t.url=w(E(o),t.url),t.url=V(t.url),j(d.MiniProgram.SWITCH_TAB,t)&&L.beforeInvoke(d.MiniProgram.SWITCH_TAB,t)}});function ce(){}const le={nonempty:!0},ue={optional:!0};const Ee={optional:!0};const de={nonempty:!0},fe={optional:!0};var _e=Object.freeze({__proto__:null,arrayBufferToBase64:function(e){const t=new Uint8Array(e),r=t.byteLength,n=new Array(r);for(let e=0;e<r;e++)n[e]=String.fromCharCode(t[e]);const o=n.join("");return btoa(o)},base64ToArrayBuffer:function(e){if(!K(e))return void Y(d.Native.BASE64_TO_ARRAYBUFFER,"parameter error: parameter base64 type not legal, please check it.");if(!function(e){try{return atob(e),!0}catch(e){return!1}}(e))return void Y(d.Native.BASE64_TO_ARRAYBUFFER,`parameter base64 ${e} is invalid base64 string`);const t=atob(e),r=t.length,n=new ArrayBuffer(r),o=new Uint8Array(n);for(let e=0;e<r;e++)o[e]=t.charCodeAt(e);return n},callNativeAPI:function(e,t={},r,n=ce){[r,n].find((e=>!e||"function"!=typeof e))?Y(e,"callback should be function!"):L.invoke(e,t,((t,o)=>{if(!(0===Number(t)))return Y(e,`${o.errMsg}`),void n(o);r(o)}))},cancelAuthorize:function(e){if(!e.scopes)return Z(d.Native.CANCLE_AUTHORIZE_PERMISSION,e,"parameter error:parameter.scopes should be Array<string> instead of Undefined.");if(Q(d.Native.CANCLE_AUTHORIZE_PERMISSION,e,{scopes:[""]})){const t=function(e){const t=[...oe,...ne].map((e=>`scope.${e}`));return e.filter((e=>!t.includes(`${e}`)))}(e.scopes);return t.length>0?Z(d.Native.CANCLE_AUTHORIZE_PERMISSION,e,`parameter error: invalid scopes ${t}`):L.beforeInvoke(d.Native.CANCLE_AUTHORIZE_PERMISSION,e)}return e.invalidParamObj},capsuleStyle:function(e){if(q(d.Native.CAPSULE_STYLE,e,{style:0})){return-1===[0,1].indexOf(e.style)?Z(d.Native.CAPSULE_STYLE,e,`parameter error: invalid style ${e.style}`):L.beforeInvoke(d.Native.CAPSULE_STYLE,e)}return e.invalidParamObj},chooseContact:function(e){return L.beforeInvoke(d.Native.CHOOSE_CONTACT,e)},chooseImage:function(e){if(Q(d.Native.CHOOSE_IMAGE,e,{sourceType:[""],sizeType:[""]},{sourceType:{optional:!0,checkSubEleType:!0,range:["album","camera"]},sizeType:{optional:!0,range:["original","compressed"]}})){const t=Object.assign({count:9,sizeType:["original","compressed"],sourceType:["album","camera"]},e);return L.beforeInvoke(d.Native.CHOOSE_IMAGE,t)}return e.invalidParamObj},chooseVideo:function(e){if(Q(d.Native.CHOOSE_VIDEO,e,{sourceType:[""],camera:""},{sourceType:{optional:!0,checkSubEleType:!0,range:["album","camera"]},camera:{optional:!0,range:["back","front"]}})){const t=Object.assign({sourceType:["album","camera"],camera:"back"},e);return L.beforeInvoke(d.Native.CHOOSE_VIDEO,t)}return e.invalidParamObj},clearStorage:function(e){return L.beforeInvoke(d.Native.CLEAR_STORAGE,e)},closeBLEConnection:function(e){return ae({deviceId:e.deviceId},e,d.Native.CLOSE_BLE_CONNECTION)&&q(d.Native.CLOSE_BLE_CONNECTION,e,{deviceId:""})?L.beforeInvoke(d.Native.CLOSE_BLE_CONNECTION,e):e.invalidParamObj},closeBluetoothAdapter:function(e){return L.beforeInvoke(d.Native.CLOSE_BLUETOOTH_ADAPTER,e)},createBLEConnection:function(e){if(!ae({deviceId:e.deviceId},e,d.Native.CREATE_BLE_CONNECTION))return e.invalidParamObj;if(Q(d.Native.CREATE_BLE_CONNECTION,e,{deviceId:"",timeout:0},{timeout:{optional:!0}})){const t=Object.assign({timeout:3e4},e);return L.beforeInvoke(d.Native.CREATE_BLE_CONNECTION,t)}return e.invalidParamObj},deauthorize:function(e){return L.beforeInvoke(d.Native.DEAUTHORIZE_PERMISSION,e)},downloadFile:function(e){return e.url?F(e.url)?L.beforeInvoke(d.Native.DOWNLOAD_FILE,e):Z(d.Native.DOWNLOAD_FILE,e,`parameter error: invalid url ${e.url}`):Z(d.Native.DOWNLOAD_FILE,e,"parameter error: parameter.url should be String instead of Undefined.")},exitMiniProgram:function(e){return Q(d.Native.EXIT_MINI_PROGRAM,e,{clearCache:!1},{clearCache:Ee})?L.beforeInvoke(d.Native.EXIT_MINI_PROGRAM,e):e.invalidParamObj},getAuthCode:function(e){if(!e.scopes)return Z(d.Native.GET_AUTH_CODE,e,"parameter error: parameter.scopes is necessary, please check input param.",U.Errno(G.COMMON,B.COMMON,H.MISSING_PARAM));if(X(d.Native.GET_AUTH_CODE,e,{scopes:["1"]})){const t=e.scopes.filter((e=>!ne.includes(`${e}`.toUpperCase())));return t.length>0?Z(d.Native.GET_AUTH_CODE,e,`parameter error: invalid scopes ${t}`,U.Errno(G.COMMON,B.COMMON,H.INVALID_VALUE)):L.beforeInvoke(d.Native.GET_AUTH_CODE,e)}return e.invalidParamObj},getBLEDeviceCharacteristics:function(e){return ae({deviceId:e.deviceId,serviceId:e.serviceId},e,d.Native.GET_BLE_DEVICE_CHARACTERISTICS)&&q(d.Native.GET_BLE_DEVICE_CHARACTERISTICS,e,{deviceId:"",serviceId:""})?L.beforeInvoke(d.Native.GET_BLE_DEVICE_CHARACTERISTICS,e):e.invalidParamObj},getBLEDeviceServices:function(e){return ae({deviceId:e.deviceId},e,d.Native.GET_BLE_DEVICE_SERVICES)&&q(d.Native.GET_BLE_DEVICE_SERVICES,e,{deviceId:""})?L.beforeInvoke(d.Native.GET_BLE_DEVICE_SERVICES,e):e.invalidParamObj},getBackgroundFetchData:function(e){return e.fetchType?L.beforeInvoke(d.Native.GET_BACKGROUND_FETCH_DATA,e):Z(d.Native.GET_BACKGROUND_FETCH_DATA,e,"parameter error:parameter.fetchType should be string instead of Undefined.")},getClipboardData:function(e){return L.beforeInvoke(d.Native.GET_CLIPBOARD_DATA,e)},getLaunchOptionsSync:function(){const e=L.invokeSync(d.Native.GET_LAUNCH_OPTIONS_SYNC);return e&&JSON.parse(e)},getLocalImgData:function(e){return(null==e?void 0:e.path)?L.beforeInvoke(d.Native.GET_LOCAL_IMG_DATA,e):Z(d.Native.GET_LOCAL_IMG_DATA,e,"parameter error:parameter.path should be String instead of Undefined.")},getLocation:function(e){const t=Object.assign({useFetchData:!1},e);return X(d.Native.GET_LOCATION,t,{useFetchData:!1})?L.beforeInvoke(d.Native.GET_LOCATION,t):t.invalidParamObj},getNetworkType:function(e){return L.beforeInvoke(d.Native.GET_NETWORK_TYPE,e)},getOpenUserInfo:function(e){return L.beforeInvoke(d.Native.GET_OPEN_USER_INFO,e)},getStatusBarHeight:function(e){return L.beforeInvoke(d.Native.GET_STATUS_BAR_HEIGHT,e)},getStorage:function(e){if(!(null==e?void 0:e.key))return Z(d.Native.GET_STORAGE,e,"parameter error:parameters.key should be String instead of Undefined.");const t=Object.assign({encrypt:!1},e);return L.beforeInvoke(d.Native.GET_STORAGE,t)},getStorageSync:function(e){return K(e)?L.invokeSync(d.Native.GET_STORAGE_SYNC,{key:e}):Z(d.Native.GET_STORAGE_SYNC,{},`parameter error:key should be string instead of ${typeof e}.`)},getSystemInfoSync:function(){const e=L.invokeSync(d.Native.GET_SYSTEM_INFO_SYNC);return e&&JSON.parse(e)},getSystemSetting:function(){const e=L.invokeSync(d.Native.GET_SYSTEM_SETTING);return e&&JSON.parse(e)},getsmallappinfo:function(e){return L.beforeInvoke(d.Native.GET_SMALL_APP_INFO,e)},gotoBrowser:function(e){return e.openUrl?q(d.Native.GO_TO_BROWSER,e,{openUrl:""})?L.beforeInvoke(d.Native.GO_TO_BROWSER,e):e.invalidParamObj:Z(d.Native.GO_TO_BROWSER,e,"parameter error:parameter.openUrl should be String instead of Undefined.")},hideLoading:function(e){return L.beforeInvoke(d.Native.HIDE_LOADING,e)},isOnline:function(){return window.navigator.onLine},native:function(e,t){const r=t||{};return new Promise(((t,n)=>{L.invoke(e,r,((r,o)=>{if(!(0===Number(r)))return Y(e,`${o.errMsg||JSON.stringify(o)}`),void n(o);t(o)}))}))},navigateToMiniProgram:function(e){return void 0===e.appId?Z(d.Native.NAVIGATE_TO_MINI_PROGRAM,e,"parameter error: parameter.appId is necessary, please check input param.",U.Errno(G.COMMON,B.COMMON,H.MISSING_PARAM)):X(d.Native.NAVIGATE_TO_MINI_PROGRAM,e,{appId:"",capsuleShow:!0,path:"",params:""})?!e.path&&e.params?Z(d.Native.NAVIGATE_TO_MINI_PROGRAM,e,"parameter error: there is params but no path.",U.Errno(G.COMMON,B.COMMON,H.MISSING_PARAM)):L.beforeInvoke(d.Native.NAVIGATE_TO_MINI_PROGRAM,e):e.invalidParamObj},offBluetoothDeviceFound:function(){_.off(d.Native.ON_BLUETOOTH_DEVICE_FOUND)},offKeyboardHeightChange:function(e){"Undefined"!==$(e)?ie(e)?_.off(d.Native.ON_KEYBOARD_HEIGHT_CHANGE,e):Y("offKeyboardHeightChange","callback is not a function"):_.off(d.Native.ON_KEYBOARD_HEIGHT_CHANGE)},offScreenRecordingStateChanged:function(){_.off(d.Native.ON_SCREEN_RECORD_STATE_CHANGE)},onBluetoothDeviceFound:function(e){"Function"===$(e)?_.on(d.Native.ON_BLUETOOTH_DEVICE_FOUND,e):Y("onBluetoothDeviceFound","callback is not a function")},onKeyboardHeightChange:function(e){ie(e)?_.on(d.Native.ON_KEYBOARD_HEIGHT_CHANGE,e):Y("onKeyboardHeightChange","callback is not a function")},onScreenRecordingStateChanged:function(e){"Function"===$(e)?_.on(d.Native.ON_SCREEN_RECORD_STATE_CHANGE,e):Y("onScreenRecordingStateChanged","callback is not a function")},openBluetoothAdapter:function(e){return L.beforeInvoke(d.Native.OPEN_BLUETOOTH_ADAPTER,e)},openDocument:function(e){return(null==e?void 0:e.filePath)?e.fileType&&-1===["doc","docx","xls","xlsx","ppt","pptx","pdf"].indexOf(e.fileType)?Z(d.Native.OPEN_DOCUMENT,e,"parameter error:parameter.fileType is invalid value."):L.beforeInvoke(d.Native.OPEN_DOCUMENT,e):Z(d.Native.OPEN_DOCUMENT,e,"parameter error:parameters.filePath should be String instead of Undefined.")},playAudio:function(e){return e.url?F(e.url)?L.beforeInvoke(d.Native.PLAY_VOICE,e):Z(d.Native.PLAY_AUDIO,e,`parameter error: invalid url ${e.url}`):Z(d.Native.PLAY_AUDIO,e,"parameter error:parameter.url should be String instead of Undefined.")},previewImage:function(e){return(null==e?void 0:e.urls)?L.beforeInvoke(d.Native.PREVIEW_IMAGE,e):Z(d.Native.PREVIEW_IMAGE,e,"parameter error:parameter.urls should be Array instead of Undefined.")},readBLECharacteristicValue:function(e){return ae({deviceId:e.deviceId,serviceId:e.serviceId,characteristicId:e.characteristicId},e,d.Native.READ_BLE_CHARACTERISTIC_VALUE)&&q(d.Native.READ_BLE_CHARACTERISTIC_VALUE,e,{deviceId:"",serviceId:"",characteristicId:""})?L.beforeInvoke(d.Native.READ_BLE_CHARACTERISTIC_VALUE,e):e.invalidParamObj},removeStorage:function(e){return(null==e?void 0:e.key)?L.beforeInvoke(d.Native.REMOVE_STORAGE,e):Z(d.Native.REMOVE_STORAGE,e,"parameter error:parameter.key should be String instead of Undefined.")},reportEvent:function(e){if(Q(d.Native.REPORT_EVENT,e,{eventId:"",eventData:{}},{eventId:le,eventData:ue})){e.eventData||(e.eventData={});const t=e.eventData;for(const r of Object.keys(t)){const n=t[r];if(!K(n)&&!z(n))return Z(d.Native.REPORT_EVENT,e,`parameter error:  invalid value ${n}`);z(n)&&(t[r]=Number(n.toFixed(6)))}return L.notifyNative(d.Native.REPORT_EVENT,e)}return e.invalidParamObj},reportLog:function(e){if(!e.log||!J(e.log)&&!K(e.log))return Z(d.Native.REPORT_LOG,e,"parameter error:  parameter.log should be Object or String instead of Undefined.");if(e.level&&-1===["debug","info","error"].indexOf(e.level))return Z(d.Native.REPORT_LOG,e,`parameter error:  invalid level ${e.level}`);J(e.log)&&(e.log=JSON.stringify(e.log));const t=Object.assign({level:"info"},e);return L.notifyNative(d.Native.REPORT_LOG,t)},reportPerformance:function(e){return e.reportEvent&&K(e.reportEvent)?e.reportParams&&J(e.reportParams)?L.notifyNative(d.Native.REPORT_PERFORMANCE,e):Z(d.Native.REPORT_PERFORMANCE,e,"parameter error:  parameter.reportParams should be Object instead of Undefined."):Z(d.Native.REPORT_PERFORMANCE,e,"parameter error:  parameter.reportEvent should be String instead of Undefined.")},request:function(e){const t=function(e){let t="";e.url||(t="parameter error: parameter.url should be String instead of Undefined.");F(e.url)||(t=`parameter error: invalid url ${e.url}`);e.data&&"Function"===$(e.data)&&(t="parameter error: data should not be Function.");return t}(e);if(t)return Z(d.Native.REQUEST,e,t);e.header&&!J(e.header)&&(e.header={}),e.header=function(e){const t={};for(const r in e)switch($(e[r])){case"String":t[r]=e[r];break;case"Number":case"Boolean":t[r]=`${e[r]}`;break;default:t[r]=JSON.stringify(e[r])}return t}(e.header||{});for(const t in e.header)if("content-type"===t.toLowerCase()){const r=e.header[t];delete e.header[t],e.header[t.toLowerCase()]=r}e.method=e.method?e.method.toUpperCase():"GET",e.dataType=e.dataType||"json",e.header["content-type"]=e.header["content-type"]||"application/json";let r="";e.data&&(r=J(e.data)?JSON.stringify(e.data):e.data),"GET"===e.method&&(e.url=W(e.url,e.data||{}));const n=Object.assign({data:r},e);return L.beforeInvoke(d.Native.REQUEST,n,{beforeSuccess(t){if("json"===e.dataType)try{t.data&&K(t.data)&&(t.data=JSON.parse(t.data))}catch(t){Y(d.Native.REQUEST,`JSON parse data error from ${e.url}`)}}})},saveBase64Image:function(e){return e.base64?q(d.Native.SAVE_BASE64_IMAGE,e,{base64:""})?L.beforeInvoke(d.Native.SAVE_BASE64_IMAGE,e):e.invalidParamObj:Z(d.Native.SAVE_BASE64_IMAGE,e,"parameter error:parameter.base64 should be String instead of Undefined.")},saveFileToPhone:function(e){return e.content?e.fileName?q(d.Native.SAVE_FILE_TO_PHONE,e,{content:"",fileName:""})?L.beforeInvoke(d.Native.SAVE_FILE_TO_PHONE,e):e.invalidParamObj:Z(d.Native.SAVE_FILE_TO_PHONE,e,"parameter error:parameter.fileName should be String instead of Undefined."):Z(d.Native.SAVE_FILE_TO_PHONE,e,"parameter error:parameter.content should be String instead of Undefined.")},saveImage:function(e){return e.content?q(d.Native.SAVE_IMAGE,e,{content:""})?L.beforeInvoke(d.Native.SAVE_IMAGE,e):e.invalidParamObj:Z(d.Native.SAVE_IMAGE,e,"parameter error:parameter.content should be String instead of Undefined.")},scanCode:function(e){const t=["barCode","qrCode","datamatrix","pdf417"];if((null==e?void 0:e.scanType)&&e.scanType.length>0&&!e.scanType.every((e=>t.indexOf(e)>-1)))return Z(d.Native.SCAN_CODE,e,"parameter error:parameter.scanType contains invalid values.");const r=Object.assign({onlyFromCamera:!1,scanType:["barCode","qrCode"]},e);return L.beforeInvoke(d.Native.SCAN_CODE,r)},setCapsuleShow:function(e){if(X(d.Native.SET_CAPSULE_SHOW,e,{isShow:!1})){const t=Object.assign({isShow:!0},e);return L.beforeInvoke(d.Native.SET_CAPSULE_SHOW,t)}return e.invalidParamObj},setClipboardData:function(e){return e.data?X(d.Native.SET_CLIPBOARD_DATA,e,{data:""})?L.beforeInvoke(d.Native.SET_CLIPBOARD_DATA,e):e.invalidParamObj:Z(d.Native.SET_CLIPBOARD_DATA,e,"parameter error: parameter.data is necessary, please check input param.",U.Errno(G.COMMON,B.COMMON,H.MISSING_PARAM))},setStorage:function(e){if(!(null==e?void 0:e.key)||!e.data)return Z(d.Native.SET_STORAGE,e,"parameter error:parameter.key or parameter.data should not be Undefined.");const t=Object.assign({encrypt:!1},e);return L.beforeInvoke(d.Native.SET_STORAGE,t)},setStorageSync:function(e,t){return K(e)?L.invokeSync(d.Native.SET_STORAGE_SYNC,{key:e,data:t}):Z(d.Native.SET_STORAGE_SYNC,{},`parameter error:key should be string instead of ${typeof e}.`)},showLoading:function(e){const t=Object.assign({title:"Loading...",mask:!1},e);return q(d.Native.SHOW_LOADING,t,{title:"",mask:!1})?L.beforeInvoke(d.Native.SHOW_LOADING,t):t.invalidParamObj},showToast:function(e){var t;if(!(null==e?void 0:e.title)&&!(null==e?void 0:e.message))return Z(d.Native.SHOW_TOAST,e,"parameter error: prompt message should be String instead of Undefined.");if(e.title=null!==(t=e.title)&&void 0!==t?t:e.message,q(d.Native.SHOW_TOAST,e,{title:"",message:"",icon:"",duration:0,mask:!1,image:""})){const t=["success","error","loading","none"];if((null==e?void 0:e.icon)&&-1===t.indexOf(null==e?void 0:e.icon))return Z(d.Native.SHOW_TOAST,e,"parameter error:parameter.icon contains invalid values.");const r=Object.assign({icon:"success",duration:1500,mask:!1},e);return L.beforeInvoke(d.Native.SHOW_TOAST,r)}return e.invalidParamObj},startBluetoothDevicesDiscovery:function(e){return Q(d.Native.START_BLUETOOTH_DEVICES_DISCOVERY,e,{services:["1"]},{services:{optional:!0}})?L.beforeInvoke(d.Native.START_BLUETOOTH_DEVICES_DISCOVERY,e):e.invalidParamObj},stopAudio:function(e){return L.beforeInvoke(d.Native.STOP_AUOID,e)},stopBluetoothDevicesDiscovery:function(e){return L.beforeInvoke(d.Native.STOP_BLUETOOTH_DEVICES_DISCOVERY,e)},submitReport:function(e){return L.beforeInvoke(d.Native.SUBMIT_REPORT,e)},tradePay:function(e){return Q(d.Native.TRADE_PAY,e,{tradeNO:"",orderStr:"",sign:"",extendParam:""},{tradeNO:de,orderStr:de,sign:de,extendParam:fe})?L.beforeInvoke(d.Native.TRADE_PAY,e):e.invalidParamObj},uploadFile:function(e){if(!e.url)return Z(d.Native.UPLOAD_FILE,e,"parameter error: parameter.url should be String instead of Undefined.");if(e.files)e.filePath="",e.name="";else{if(!e.filePath)return Z(d.Native.UPLOAD_FILE,e,"parameter error: parameter.filePath should be String instead of Undefined.");if(!e.name)return Z(d.Native.UPLOAD_FILE,e,"parameter error: parameter.name should be String instead of Undefined.")}return L.beforeInvoke(d.Native.UPLOAD_FILE,e)},writeBLECharacteristicValue:function(e){const{deviceId:t,serviceId:r,characteristicId:n,value:o,writeType:a}=e,i={deviceId:t,serviceId:r,characteristicId:n,value:o};if(void 0!==a&&(i.writeType=a),!ae(i,e,d.Native.WRITE_BLE_CHARACTERISTIC_VALUE))return e.invalidParamObj;if(q(d.Native.WRITE_BLE_CHARACTERISTIC_VALUE,e,{deviceId:"",serviceId:"",characteristicId:"",value:new ArrayBuffer(8),writeType:""})){const t=["write","writeNoResponse","signedWrite"];if((null==e?void 0:e.writeType)&&-1===t.indexOf(null==e?void 0:e.writeType))return Z(d.Native.WRITE_BLE_CHARACTERISTIC_VALUE,e,"parameter error:parameter.writeType contains invalid values.");const r=(s=e.value,Array.from(new Uint8Array(s))),n=Object.assign(Object.assign({},e),{value:r});return L.beforeInvoke(d.Native.WRITE_BLE_CHARACTERISTIC_VALUE,n)}var s;return e.invalidParamObj}});const ve=Object.assign({miniProgram:Object.assign(Object.assign({},se),{navigateBackMiniProgram(){},onWebviewEvent(){},offWebviewEvent(){},sendWebviewEvent(){},onShow(){},onHide(){},onUnload(){}})},_e);return window.ma=ve,"loading"!==document.readyState?P():document.addEventListener("DOMContentLoaded",P),window.onerror=function(e,t,r,n,o){try{const{stack:a="No stack trace"}=o instanceof Error?o:{};k.normalError({key:"jsRuntimeError",message:e||"Unknown error",stack:a,file:t||"Unknown file",line:r||0,column:n||0})}catch(e){console.log("Reporter error:",e)}return!1},window.onunhandledrejection=function(e){const t=e.reason,r=t instanceof Error?t.message:String(t),n=t instanceof Error?t.stack:"No stack trace";k.normalError({key:"unhandledRejection",message:r,stack:n}),console.log("Unhandled promise rejection:",t),e.preventDefault()},window.addEventListener("error",(e=>{const{target:t}=e;if(t instanceof HTMLLinkElement){const e=(null==t?void 0:t.href)||"unknown";k.normalError({key:"resourceLoadError",message:`CSS load failed: ${e}`,file:e,stack:"No stack"}),console.log(`CSS load failed: ${e}`)}else if(t instanceof HTMLScriptElement||t instanceof HTMLImageElement){const e=t.src;k.normalError({key:"resourceLoadError",message:`Resource load failed: ${e}`,file:e,stack:"No stack"}),console.log(`Resource load failed: ${e}`)}else if(t instanceof HTMLIFrameElement){const e=t.src;k.normalError({key:"resourceLoadError",message:`Iframe load failed: ${e}`,file:e,stack:"No stack"}),console.log(`Iframe load failed: ${e}`)}else console.log("Unknown resource load error:",t),k.normalError({key:"resourceLoadError",message:"Unknown resource load error",stack:"No stack"})}),!0),window.viewLayer={onInvokeFinished:function(e,t,r){const n=v[e];"function"==typeof n&&n(t,r),2!==Number(t)&&delete v[e]},subscribeHandler:function(e,t){return(0,g[e])(t)}},ve}));
